# v1.1.0 - Foundation Scripts

Phase 1 of the homelab automation scripts is complete! This release introduces three new production-ready scripts for certificate monitoring, database backups, and service health checks.

---

## ğŸ‰ New Scripts

### cert-renewal-check.sh
SSL certificate expiry monitoring and renewal automation.

**Features:**
- âœ… Check domain certificates via HTTPS connection
- âœ… Inspect local certificate files
- âœ… Configurable warning threshold (default: 30 days, range: 1-365)
- âœ… Table and JSON output formats
- âœ… Optional certbot auto-renewal integration
- âœ… Dry-run mode for testing
- âœ… Cross-platform (macOS/Linux)

**Example:**
```bash
./cert-renewal-check.sh --domains domains.txt --warn-days 30 --json
```

---

### db-backup.sh
Automated PostgreSQL/MySQL backups with intelligent retention policies.

**Features:**
- âœ… PostgreSQL and MySQL support with DSN-based configuration
- âœ… Configurable retention (daily:weekly:monthly format, default: 7:4:12)
- âœ… Automatic gzip compression
- âœ… Optional rclone cloud sync for off-site backups
- âœ… Test restore validation (PostgreSQL only)
- âœ… DSN password masking in all output
- âœ… Table and JSON output formats

**Example:**
```bash
export DB_DSN="postgres://user:pass@localhost:5432/mydb"
./db-backup.sh --db pg --out ./backups --retention 7:4:12
```

---

### service-health-check.sh
Config-driven uptime monitoring with multiple check types.

**Features:**
- âœ… HTTP endpoint checks with status code and body validation
- âœ… TCP port connectivity checks
- âœ… Process monitoring via pgrep
- âœ… Docker container status checks
- âœ… Watch mode with continuous monitoring
- âœ… State tracking with change detection
- âœ… Webhook notifications on state changes
- âœ… INI-style configuration format

**Example:**
```bash
./service-health-check.sh --config services.conf --watch --interval 60 \
    --notify webhook:http://alerts.local/webhook
```

---

## ğŸ”§ Bug Fixes

- **disk-cleanup.sh**: Fixed unbound variable error in manifest check for `--scan-venvs`

---

## ğŸ“Š Quality Standards

All scripts in this release meet comprehensive quality standards:

- âœ… **Full CI/CD coverage** - Smoke tests in GitHub Actions
- âœ… **ShellCheck validated** - Zero warnings or errors
- âœ… **Security hardened** - Secure logging, input validation, no secrets in CLI args
- âœ… **Cross-platform** - Tested on both macOS and Linux
- âœ… **Well documented** - Comprehensive README sections with examples
- âœ… **Example configs** - Ready-to-use configuration files

---

## ğŸ“¦ Installation

```bash
# Clone the repository
git clone https://github.com/adrianwedd/homelab-scripts.git
cd homelab-scripts

# Make scripts executable
chmod +x *.sh

# Run with --help to see options
./cert-renewal-check.sh --help
./db-backup.sh --help
./service-health-check.sh --help
```

---

## ğŸš€ What's Next

**Phase 2 (v1.2.0)** will focus on Docker operations:
- `compose-redeploy.sh` - Safe Docker Compose updates with rollback
- `docker-volume-backup.sh` - Consistent volume snapshots
- `dyndns-update.sh` - Dynamic DNS updates for homelabs

See [ROADMAP.md](ROADMAP.md) for the complete development plan.

---

## ğŸ“ Full Changelog

See [CHANGELOG.md](CHANGELOG.md) for detailed changes.
